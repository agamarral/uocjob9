function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(a):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,c=new Array(t);a<t;a++)c[a]=e[a];return c}function _iterableToArrayLimit(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var a=[],c=!0,n=!1,i=void 0;try{for(var o,r=e[Symbol.iterator]();!(c=(o=r.next()).done)&&(a.push(o.value),!t||a.length!==t);c=!0);}catch(l){n=!0,i=l}finally{try{c||null==r.return||r.return()}finally{if(n)throw i}}return a}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var a=0;a<t.length;a++){var c=t[a];c.enumerable=c.enumerable||!1,c.configurable=!0,"value"in c&&(c.writable=!0),Object.defineProperty(e,c.key,c)}}function _createClass(e,t,a){return t&&_defineProperties(e.prototype,t),a&&_defineProperties(e,a),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{rNMf:function(e,t,a){"use strict";a.r(t),a.d(t,"CompanyOffersModule",(function(){return se}));var c=a("ofXK"),n=a("PCNd"),i=a("3Pt+"),o=a("tyNb"),r=a("itXk"),l=a("lJxs"),m=a("eIep"),s=a("0IaG"),f=a("dQXc"),u=a("fXoL"),d=a("eyTg"),p=a("Wp6s"),h=a("kmnG"),b=a("qFsG"),g=a("d3UM"),y=a("+0xr"),v=a("FKr1");function C(e,t){if(1&e&&(u.mc(0,"mat-option",25),u.Rc(1),u.lc()),2&e){var a=t.$implicit;u.Dc("value",a),u.Ub(1),u.Sc(a)}}function w(e,t){if(1&e&&(u.mc(0,"mat-option",25),u.Rc(1),u.lc()),2&e){var a=t.$implicit;u.Dc("value",a),u.Ub(1),u.Sc(a)}}function D(e,t){1&e&&(u.mc(0,"th",26),u.Rc(1," Nombre del candidato "),u.lc())}function O(e,t){if(1&e&&(u.mc(0,"td",27),u.Rc(1),u.lc()),2&e){var a=t.$implicit;u.Ub(1),u.Tc(" ",a.name," ")}}function R(e,t){1&e&&(u.mc(0,"th",26),u.Rc(1," Apellido del candidato "),u.lc())}function j(e,t){if(1&e&&(u.mc(0,"td",27),u.Rc(1),u.lc()),2&e){var a=t.$implicit;u.Ub(1),u.Tc(" ",a.surname," ")}}function k(e,t){1&e&&u.hc(0,"mat-header-cell")}function _(e,t){if(1&e){var a=u.nc();u.mc(0,"mat-cell"),u.mc(1,"button",24),u.uc("click",(function(e){u.Kc(a);var c=t.$implicit;return u.yc().selectCandidate(c)})),u.Rc(2,"Seleccionar"),u.lc(),u.mc(3,"button",23),u.uc("click",(function(e){u.Kc(a);var c=t.$implicit;return u.yc().discardCandidate(c)})),u.Rc(4,"Descartar"),u.lc(),u.lc()}}function F(e,t){1&e&&u.hc(0,"tr",28)}function S(e,t){1&e&&u.hc(0,"tr",29)}var P=function(){function e(t,a,c,n){var o=this;_classCallCheck(this,e),this.formBuilder=t,this.usersStoreFacade=a,this.dialogRef=c,this.provinceList=[],this.townList=[],this.candidates=[],this.candidatesDisplayedColumns=["candidateName","candidateSurname","actions"],this.currentOffer=n,this.currentOffer.users.map((function(e){return o.usersStoreFacade.getUserById(e).subscribe((function(e){return o.candidates.push(e)}))})),f.forEach((function(e){o.provinceList.push(e.name)})),""!=n.province.name?(this.updateTownList(n.province.name),this.offersDetailsDlgForm=this.formBuilder.group({company:[n.company.name,i.p.required],position:[n.job.name,i.p.required],jobDescription:[n.job.description,i.p.required],province:[n.province.name,i.p.required],town:[n.municipe.name,i.p.required],jobCategory:[n.category.name,i.p.required],title:[n.title[0].name,i.p.required]})):this.offersDetailsDlgForm=this.formBuilder.group({company:[n.company.name,i.p.required],position:[n.job.name,i.p.required],jobDescription:[n.job.description,i.p.required],province:[n.province.name,i.p.required],town:[n.municipe.name,i.p.required],jobCategory:[n.category.name,i.p.required],title:["",i.p.required]}),this.titles=n.title}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"close",value:function(){this.dialogRef.close()}},{key:"apply",value:function(){var e=this,t=f.find((function(t){return t.name===e.offersDetailsDlgForm.get("province").value})),a=t.towns.find((function(t){return t.name===e.offersDetailsDlgForm.get("town").value})),c={};Object.assign(this.currentOffer),c.province={uid:t.uid,name:t.name},c.municipe=a,c.job={uid:0,name:this.offersDetailsDlgForm.get("position").value,description:this.offersDetailsDlgForm.get("jobDescription").value},c.category={uid:0,name:this.offersDetailsDlgForm.get("jobCategory").value},c.title=[],c.title.push({uid:0,name:this.offersDetailsDlgForm.get("title").value}),this.dialogRef.close(c)}},{key:"updateTownList",value:function(e){var t=this,a=f.find((function(t){return t.name===e}));this.townList=[],a.towns.forEach((function(e){t.townList.push(e.name)}))}},{key:"changeTown",value:function(){var e=this.offersDetailsDlgForm.get("province").value;this.updateTownList(e)}},{key:"selectCandidate",value:function(e){console.log("candidate "+e.candidateName+" "+e.candidateSurname+" has been selected")}},{key:"discardCandidate",value:function(e){console.log("candidate "+e.candidateName+" "+e.candidateSurname+" has been discarded")}}]),e}();P.\u0275fac=function(e){return new(e||P)(u.gc(i.c),u.gc(d.a),u.gc(s.g),u.gc(s.a))},P.\u0275cmp=u.ac({type:P,selectors:[["app-company-offers-details-dialog"]],decls:70,vars:6,consts:[[3,"formGroup"],[1,"mat-typography"],["mat-card-title",""],[1,"full-width-field"],["matInput","","type","text","name","company","readOnly","true","formControlName","company"],["matInput","","type","text","name","position","formControlName","position"],["matInput","","name","jobDescription","formControlName","jobDescription",3,"matTextareaAutosize"],[1,"half-width-field"],["panelClass","formal-theme","formControlName","province",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["panelClass","formal-theme","formControlName","town"],["matInput","","type","text","name","jobCategory","formControlName","jobCategory"],["matInput","","type","text","name","title","formControlName","title"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","candidateName"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","candidateSurname"],["matColumnDef","actions"],[4,"matHeaderCellDef"],[4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"mat-raised-button",3,"click"],[1,"mat-raised-button","mat-primary",3,"click"],[3,"value"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(e,t){1&e&&(u.mc(0,"mat-dialog-content",0),u.mc(1,"mat-card"),u.mc(2,"mat-card-header"),u.mc(3,"section",1),u.mc(4,"h2",2),u.Rc(5,"Oferta de trabajo"),u.lc(),u.lc(),u.lc(),u.mc(6,"mat-card-content"),u.mc(7,"fieldset"),u.mc(8,"legend"),u.Rc(9,"Detalle de la oferta"),u.lc(),u.mc(10,"div"),u.mc(11,"mat-form-field",3),u.mc(12,"mat-label"),u.Rc(13,"Empresa"),u.lc(),u.hc(14,"input",4),u.lc(),u.lc(),u.mc(15,"div"),u.mc(16,"mat-form-field",3),u.mc(17,"mat-label"),u.Rc(18,"Puesto"),u.lc(),u.hc(19,"input",5),u.lc(),u.lc(),u.mc(20,"div"),u.mc(21,"mat-form-field",3),u.mc(22,"mat-label"),u.Rc(23,"Descripci\xf3n del puesto"),u.lc(),u.hc(24,"textarea",6),u.lc(),u.lc(),u.lc(),u.mc(25,"fieldset"),u.mc(26,"div"),u.mc(27,"mat-form-field",7),u.mc(28,"mat-label"),u.Rc(29,"Provincia"),u.lc(),u.mc(30,"mat-select",8),u.uc("selectionChange",(function(e){return t.changeTown()})),u.Qc(31,C,2,2,"mat-option",9),u.lc(),u.lc(),u.mc(32,"mat-form-field",7),u.mc(33,"mat-label"),u.Rc(34,"Municipio"),u.lc(),u.mc(35,"mat-select",10),u.Qc(36,w,2,2,"mat-option",9),u.lc(),u.lc(),u.lc(),u.lc(),u.mc(37,"fieldset"),u.mc(38,"legend"),u.Rc(39,"Destinado a profesional de:"),u.lc(),u.mc(40,"div"),u.mc(41,"mat-form-field",3),u.mc(42,"mat-label"),u.Rc(43,"Familia profesional"),u.lc(),u.hc(44,"input",11),u.lc(),u.lc(),u.mc(45,"div"),u.mc(46,"mat-form-field",3),u.mc(47,"mat-label"),u.Rc(48,"T\xedtulo"),u.lc(),u.hc(49,"input",12),u.lc(),u.lc(),u.lc(),u.mc(50,"section",1),u.mc(51,"h3"),u.Rc(52,"Candidatos"),u.lc(),u.lc(),u.mc(53,"table",13),u.kc(54,14),u.Qc(55,D,2,0,"th",15),u.Qc(56,O,2,1,"td",16),u.jc(),u.kc(57,17),u.Qc(58,R,2,0,"th",15),u.Qc(59,j,2,1,"td",16),u.jc(),u.kc(60,18),u.Qc(61,k,1,0,"mat-header-cell",19),u.Qc(62,_,5,0,"mat-cell",20),u.jc(),u.Qc(63,F,1,0,"tr",21),u.Qc(64,S,1,0,"tr",22),u.lc(),u.lc(),u.lc(),u.lc(),u.mc(65,"mat-dialog-actions"),u.mc(66,"button",23),u.uc("click",(function(e){return t.close()})),u.Rc(67,"Cerrar"),u.lc(),u.mc(68,"button",24),u.uc("click",(function(e){return t.apply()})),u.Rc(69,"Guardar"),u.lc(),u.lc()),2&e&&(u.Dc("formGroup",t.offersDetailsDlgForm),u.Ub(31),u.Dc("ngForOf",t.provinceList),u.Ub(5),u.Dc("ngForOf",t.townList),u.Ub(17),u.Dc("dataSource",t.candidates),u.Ub(10),u.Dc("matHeaderRowDef",t.candidatesDisplayedColumns),u.Ub(1),u.Dc("matRowDefColumns",t.candidatesDisplayedColumns))},directives:[s.e,i.l,i.f,p.a,p.e,p.i,p.d,h.c,h.f,b.b,i.b,i.k,i.e,b.d,g.a,c.j,y.j,y.c,y.e,y.b,y.g,y.i,s.c,v.o,y.d,y.a,y.f,y.h],styles:[".half-width-field{width:31vw;margin-right:3vw}.third-width-field{width:19.5vw;margin-right:3vw}.full-width-field{width:65vw;margin-right:3vw}.mat-card-title{margin-left:0}table.mat-table{width:60vw;margin-left:auto;margin-right:auto}table.mat-table td.mat-cell{font-size:14px;text-align:center}table.mat-table th.mat-header-cell{text-align:center}table.mat-table .mat-raised-button{margin-left:auto;margin-right:auto;margin-top:10px}table.mat-table .mat-raised-button .mat-icon{font-size:16px}table.mat-table .mat-column-actions,table.mat-table .mat-column-candidateName,table.mat-table .mat-column-candidateSurname{width:20vw}"],encapsulation:2,changeDetection:0});var T=a("wd/R"),x=a.n(T),M=a("43yu"),N=a("3r9f"),Q=a("NFeN");function I(e,t){1&e&&(u.mc(0,"th",14),u.Rc(1," Empresa "),u.lc())}function A(e,t){if(1&e&&(u.mc(0,"td",15),u.Rc(1),u.lc()),2&e){var a=t.$implicit;u.Ub(1),u.Tc(" ",a.company.name," ")}}function U(e,t){1&e&&(u.mc(0,"th",14),u.Rc(1," Familia Profesional "),u.lc())}function L(e,t){if(1&e&&(u.mc(0,"td",15),u.Rc(1),u.lc()),2&e){var a=t.$implicit;u.Ub(1),u.Tc(" ",a.category.name," ")}}function $(e,t){1&e&&(u.mc(0,"th",14),u.Rc(1," Fecha "),u.lc())}function q(e,t){if(1&e&&(u.mc(0,"td",15),u.Rc(1),u.lc()),2&e){var a=t.$implicit;u.Ub(1),u.Tc(" ",a.date," ")}}function H(e,t){1&e&&(u.mc(0,"th",14),u.Rc(1," Prov\xedncia "),u.lc())}function z(e,t){if(1&e&&(u.mc(0,"td",15),u.Rc(1),u.lc()),2&e){var a=t.$implicit;u.Ub(1),u.Tc(" ",a.province.name," ")}}function K(e,t){if(1&e){var a=u.nc();u.mc(0,"mat-header-cell"),u.mc(1,"button",16),u.uc("click",(function(e){return u.Kc(a),u.yc().createNew()})),u.mc(2,"mat-icon",17),u.Rc(3,"add"),u.lc(),u.lc(),u.lc()}}function X(e,t){if(1&e){var a=u.nc();u.mc(0,"mat-cell"),u.mc(1,"button",16),u.uc("click",(function(e){u.Kc(a);var c=t.$implicit,n=t.index;return u.yc().edit(c,n)})),u.mc(2,"mat-icon",17),u.Rc(3,"create"),u.lc(),u.lc(),u.mc(4,"button",16),u.uc("click",(function(e){u.Kc(a);var c=t.index;return u.yc().cancelOrDelete(c)})),u.mc(5,"mat-icon",18),u.Rc(6,"clear"),u.lc(),u.lc(),u.lc()}}function B(e,t){1&e&&u.hc(0,"tr",19)}function E(e,t){1&e&&u.hc(0,"tr",20)}var G=function(){function e(t,a,c,n){var i=this;_classCallCheck(this,e),this.offersStoreFacade=t,this.companiesStoreFacade=a,this.route=c,this.dialog=n,this.offers$=this.offersStoreFacade.offers$,this.company$=this.route.params.pipe(Object(l.a)((function(e){return e.id})),Object(m.a)((function(e){return i.companiesStoreFacade.getCompanyById(e)}))),this.company={},this.offersDisplayedColumns=["companyName","category","date","province","actions"],this.theme="formal-theme",Object(r.a)(this.company$,this.offers$).subscribe((function(e){var t=_slicedToArray(e,2),a=t[0],c=t[1];null!=a&&(i.company=a,c.length>0&&null!=i.company.offers&&(i.jobOffers=c.filter((function(e){return i.company.offers.includes(e.id)})),i.nextOfferId=c.map((function(e){return e.id})).reduce((function(e,t){return t>e?t:e}))+1))}))}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"createNew",value:function(){var e=this,t=new s.d;t.disableClose=!0,t.autoFocus=!0,t.panelClass=this.theme,this.selectedOffer={id:this.nextOfferId,company:{uid:this.company.id,name:this.company.company},job:{uid:0,name:"",description:""},province:{uid:0,name:""},municipe:{uid:0,name:""},category:{uid:0,name:""},date:x()().format("YYYY-MM-DD"),title:[],users:[]},t.data=this.selectedOffer,this.dialog.open(P,t).afterClosed().subscribe((function(t){if(t){var a={};Object.assign(a,t),e.offersStoreFacade.addOffer(a);var c={};c.id=e.company.id,c.offers=[],e.company.offers.map((function(e){return c.offers.push(e)})),c.offers.push(e.selectedOffer.id),e.companiesStoreFacade.updateCompany(c),e.nextOfferId+=1}}))}},{key:"edit",value:function(e,t){var a=this,c=new s.d;c.disableClose=!0,c.autoFocus=!0,c.panelClass=this.theme,this.selectedOffer=this.jobOffers[t],c.data=e,console.log(c.data),this.dialog.open(P,c).afterClosed().subscribe((function(e){if(e){var t={};Object.assign(t,e),t.id=a.selectedOffer.id,a.offersStoreFacade.updateOffer(t)}}))}},{key:"cancelOrDelete",value:function(e){var t=this;this.selectedOffer=this.jobOffers[e];var a={};a.id=this.company.id,a.offers=this.company.offers.filter((function(e){return e!=t.selectedOffer.id})),this.companiesStoreFacade.updateCompany(a)}}]),e}();G.\u0275fac=function(e){return new(e||G)(u.gc(M.a),u.gc(N.a),u.gc(o.a),u.gc(s.b))},G.\u0275cmp=u.ac({type:G,selectors:[["app-company-offers"]],decls:22,vars:3,consts:[["href","https://fonts.googleapis.com/icon?family=Material+Icons","rel","stylesheet"],[1,"mat-typography"],["mat-table","",1,"mat-elevation-z8","formal-theme",3,"dataSource"],["matColumnDef","companyName"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","category"],["matColumnDef","date"],["matColumnDef","province"],["matColumnDef","actions"],[4,"matHeaderCellDef"],[4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[1,"mat-raised-button",3,"click"],["color","primary"],["color","warn"],["mat-header-row",""],["mat-row",""]],template:function(e,t){1&e&&(u.hc(0,"link",0),u.mc(1,"section",1),u.mc(2,"h3"),u.Rc(3,"Job offers"),u.lc(),u.lc(),u.mc(4,"table",2),u.kc(5,3),u.Qc(6,I,2,0,"th",4),u.Qc(7,A,2,1,"td",5),u.jc(),u.kc(8,6),u.Qc(9,U,2,0,"th",4),u.Qc(10,L,2,1,"td",5),u.jc(),u.kc(11,7),u.Qc(12,$,2,0,"th",4),u.Qc(13,q,2,1,"td",5),u.jc(),u.kc(14,8),u.Qc(15,H,2,0,"th",4),u.Qc(16,z,2,1,"td",5),u.jc(),u.kc(17,9),u.Qc(18,K,4,0,"mat-header-cell",10),u.Qc(19,X,7,0,"mat-cell",11),u.jc(),u.Qc(20,B,1,0,"tr",12),u.Qc(21,E,1,0,"tr",13),u.lc()),2&e&&(u.Ub(4),u.Dc("dataSource",t.jobOffers),u.Ub(16),u.Dc("matHeaderRowDef",t.offersDisplayedColumns),u.Ub(1),u.Dc("matRowDefColumns",t.offersDisplayedColumns))},directives:[y.j,y.c,y.e,y.b,y.g,y.i,y.d,y.a,Q.a,y.f,y.h],styles:["h3[_ngcontent-%COMP%]{margin-top:10px;margin-left:2vw}.mat-column-companyName[_ngcontent-%COMP%]{width:20vw}.mat-column-category[_ngcontent-%COMP%]{width:30vw}.mat-column-date[_ngcontent-%COMP%], .mat-column-province[_ngcontent-%COMP%]{width:20vw}.mat-column-actions[_ngcontent-%COMP%]{width:10vw}table.mat-table[_ngcontent-%COMP%]{width:94vw;margin-left:auto;margin-right:auto}table.mat-table[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]{font-size:14px;text-align:center}table.mat-table[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]{text-align:center}table.mat-table[_ngcontent-%COMP%]   .mat-raised-button[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;margin-top:10px}table.mat-table[_ngcontent-%COMP%]   .mat-raised-button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:16px}"]});var J=[{path:"",component:G}],Y=function e(){_classCallCheck(this,e)};Y.\u0275mod=u.ec({type:Y}),Y.\u0275inj=u.dc({factory:function(e){return new(e||Y)},imports:[[o.c.forChild(J)],o.c]});var W=a("kt0X"),Z=a("snw9"),V=a("P+M7"),ee=a("zk9Z"),te=a("zyTK"),ae=a("8SXD"),ce=a("QIXu"),ne=a("oo2L"),ie=a("AytR"),oe=a("B3rN"),re=a("A5HK"),le=a("nvtb"),me=a("ijts"),se=function e(){_classCallCheck(this,e)};se.\u0275mod=u.ec({type:se}),se.\u0275inj=u.dc({factory:function(e){return new(e||se)},providers:[M.a,re.a,d.a,le.a,N.a,me.a],imports:[[c.c,Y,i.o,i.g,n.a,W.j.forFeature("offers",V.c),W.j.forFeature("users",ee.e),W.j.forFeature("companies",te.e),Z.b.forFeature([ae.a,ce.a,ne.a]),ie.a.production?[]:oe.a.instrument()]]})}}]);
//# sourceMappingURL=11-es5.6d837f1c790342b58fd4.js.map