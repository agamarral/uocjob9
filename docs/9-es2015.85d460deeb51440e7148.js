(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"70Mc":function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));class s{static getAvatar(e,t="sm"){if(!e||!e.avatar_hash)return this.IMAGES.UNKNOWN_FACE;const[a,s]=e.avatar_hash.split(".");return`${this.STATIC_AVATAR_ENDPOINT}${e.uid}/${a}${t}.${s}`}}s.APP_NAME="PoliJob",s.APP_LOCALSTORAGE_TOKEN="PoliJob_Token",s.APP_VERSION="0.1.0",s.API_ENDPOINT="api/",s.STATIC_ENDPOINT=s.API_ENDPOINT+"static/",s.STATIC_AVATAR_ENDPOINT=s.STATIC_ENDPOINT+"images/avatar/",s.API_ENDPOINT_APP=s.API_ENDPOINT+"app/",s.API_ENDPOINT_USER=s.API_ENDPOINT+"users",s.API_ENDPOINT_OFFERS=s.API_ENDPOINT+"jobOffers",s.API_ENDPOINT_COMPANIES=s.API_ENDPOINT+"companies",s.API_ENDPOINT_USER_ME=s.API_ENDPOINT+"user-me",s.API_ENDPOINT_USER_CREATE=s.API_ENDPOINT_USER+"/create",s.API_ENDPOINT_CONFIRM_USER=s.API_ENDPOINT_USER+"/confirm-user",s.API_ENDPOINT_USER_REMEMBER_PASSWORD=s.API_ENDPOINT_USER+"/remember-password",s.API_ENDPOINT_USER_REQUEST_REMEMBER_PASSWORD=s.API_ENDPOINT_USER+"/request-remember-password",s.API_ENDPOINT_USER_REQUEST_USER_AVATAR=s.API_ENDPOINT_USER+"/request-avatar-user",s.API_ENDPOINT_USER_UPLOAD_AVATAR=s.API_ENDPOINT_USER+"/upload-avatar",s.API_ENDPOINT_USER_SENDMAIL=s.API_ENDPOINT_USER+"/sendmail",s.API_ENDPOINT_AUTH=s.API_ENDPOINT+"auth/",s.API_ENDPOINT_AUTH_LOCAL=s.API_ENDPOINT+"auth/local/",s.APP_QUILL_EDITOR_CONFIGURATION={toolbar:[["bold","italic","underline"],[{list:"ordered"},{list:"bullet"}],[{direction:"rtl"}],["clean"],["link"]]},s.APP_DEFAULT_MOMENT_LOCALE="es",s.GUESS_ROL={value:"guess",text:"settings.rol.GUESS"},s.STUDENT_ROL={value:"student",text:"settings.rol.STUDENT"},s.ADMINISTRATOR_ROL={value:"admin",text:"settings.rol.ADMINISTRATOR"},s.COMPANY_ROL={value:"company",text:"settings.rol.COMPANY"},s.ROLES=[s.GUESS_ROL,s.STUDENT_ROL,s.COMPANY_ROL,s.ADMINISTRATOR_ROL],s.USER_STATUS_PENDING={value:"pending",text:"settings.status.PENDING"},s.USER_STATUS_ACTIVE={value:"active",text:"settings.status.ACTIVE"},s.USER_STATUS_INACTIVE={value:"inactive",text:"settings.status.INACTIVE"},s.USER_STATUS=[s.USER_STATUS_PENDING,s.USER_STATUS_ACTIVE,s.USER_STATUS_INACTIVE],s.FORMAT_DATE="MM/DD/YYYY",s.IMAGES={UNKNOWN_IMAGE:"assets/images/image-not-found.png",UNKNOWN_FACE:"assets/images/face-unknown.png",UNKNOWN_TEAM:"assets/images/image-not-found.png"},s.NOTIFICATIONS={DEFAULT_TIME:2e3}},TQRO:function(e,t,a){"use strict";a.r(t),a.d(t,"ForgotPasswordModule",(function(){return g}));var s=a("ofXK"),r=a("3Pt+"),i=a("tyNb"),o=a("itXk"),n=a("fXoL"),c=a("eyTg"),l=a("3r9f"),m=a("Wp6s"),u=a("kmnG"),N=a("qFsG"),_=a("bTqV");function I(e,t){1&e&&(n.mc(0,"mat-error"),n.Rc(1," Ambas direcciones de correo no coinciden "),n.lc())}class E{constructor(e,t,a,s){this.fb=e,this.usersStoreFacade=t,this.companiesStoreFacade=a,this.router=s,this.isUsernameValid=!0,this.isConfirmationValid=!0,this.showConfirm=!1,this.confirmationMatch=!0,this.createForm()}createForm(){this.recallPsswdForm=this.fb.group({username:[null,[r.p.required,r.p.email]],confirmation:[{value:null,disabled:!0},[r.p.required,r.p.email]]})}ngOnInit(){this.recallPsswdForm.get("username").statusChanges.subscribe(e=>this.onNameValidation(e)),this.recallPsswdForm.get("confirmation").statusChanges.subscribe(e=>this.checkConfirmation(e))}onNameValidation(e){this.isUsernameValid="INVALID"!==e,this.isUsernameValid&&this.recallPsswdForm.get("confirmation").enable()}checkConfirmation(e){if(this.isConfirmationValid="INVALID"!==e,this.isConfirmationValid){let e=this.recallPsswdForm.get("username").value,t=this.recallPsswdForm.get("confirmation").value;this.confirmationMatch=e==t}}recallPassword(){let e=this.recallPsswdForm.get("username").value;console.log("recall password requested for user "+e),Object(o.a)(this.usersStoreFacade.getUserByUsername(e),this.companiesStoreFacade.getCompanyByUsername(e)).subscribe(([t,a])=>{if(t&&t.hasOwnProperty("username")){let e={};Object.assign(e,t),e.psswrequest=!0,this.usersStoreFacade.updateUser(e),this.router.navigate(["signin"])}else if(a&&a.hasOwnProperty("username")){let e={};Object.assign(e,a),e.psswrequest=!0,this.companiesStoreFacade.updateCompany(e),this.router.navigate(["signin"])}else this.router.navigate(["signup"]),console.log("Login for user "+e+" has failed, unknown username or password")})}goToSignup(){this.router.navigate(["signup"])}}E.\u0275fac=function(e){return new(e||E)(n.gc(r.c),n.gc(c.a),n.gc(l.a),n.gc(i.b))},E.\u0275cmp=n.ac({type:E,selectors:[["app-forgot-password"]],decls:23,vars:3,consts:[[1,"tp-card"],[3,"formGroup"],["matInput","","type","mail","placeholder","Email","name","username","formControlName","username"],["matInput","","type","mail","placeholder","Confirmaci\xf3n email","name","confirmation","formControlName","confirmation"],[4,"ngIf"],["mat-button","","color","primary","type","submit",3,"disabled","click"],["mat-button","","color","primary",3,"click"]],template:function(e,t){1&e&&(n.mc(0,"mat-card",0),n.mc(1,"mat-card-content"),n.mc(2,"mat-card-title"),n.Rc(3,"Has olvidado tu contrase\xf1a?"),n.lc(),n.mc(4,"mat-card-subtitle"),n.Rc(5,"Por favor, teclea tu nombre de usuario"),n.lc(),n.mc(6,"form",1),n.mc(7,"div"),n.mc(8,"mat-form-field"),n.mc(9,"mat-label"),n.Rc(10,"Email"),n.lc(),n.hc(11,"input",2),n.lc(),n.lc(),n.mc(12,"div"),n.mc(13,"mat-form-field"),n.mc(14,"mat-label"),n.Rc(15,"Confirmaci\xf3n Email"),n.lc(),n.hc(16,"input",3),n.Qc(17,I,2,0,"mat-error",4),n.lc(),n.lc(),n.lc(),n.lc(),n.lc(),n.mc(18,"mat-card-actions"),n.mc(19,"button",5),n.uc("click",(function(e){return t.recallPassword()})),n.Rc(20,"Recuperar password"),n.lc(),n.mc(21,"button",6),n.uc("click",(function(e){return t.goToSignup()})),n.Rc(22,"Registrarse"),n.lc(),n.lc()),2&e&&(n.Ub(6),n.Dc("formGroup",t.recallPsswdForm),n.Ub(11),n.Dc("ngIf",t.confirmationMatch),n.Ub(2),n.Dc("disabled",!t.recallPsswdForm.valid))},directives:[m.a,m.d,m.i,m.h,r.q,r.l,r.f,u.c,u.f,N.b,r.b,r.k,r.e,s.k,m.b,_.a,u.b],styles:[""],encapsulation:2});const P=[{path:"",component:E}];class A{}A.\u0275mod=n.ec({type:A}),A.\u0275inj=n.dc({factory:function(e){return new(e||A)},imports:[[i.c.forChild(P)],i.c]});var T=a("PCNd"),d=a("QIXu"),O=a("oo2L"),S=a("nvtb"),p=a("ijts"),R=a("kt0X"),f=a("snw9"),U=a("zyTK"),h=a("zk9Z");class g{}g.\u0275mod=n.ec({type:g}),g.\u0275inj=n.dc({factory:function(e){return new(e||g)},providers:[c.a,S.a,l.a,p.a],imports:[[s.c,A,s.c,r.o,T.a,R.j.forFeature("users",h.e),R.j.forFeature("companies",U.e),f.b.forFeature([d.a,O.a])]]})}}]);
//# sourceMappingURL=9-es2015.85d460deeb51440e7148.js.map