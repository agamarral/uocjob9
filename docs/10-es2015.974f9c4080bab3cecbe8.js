(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{"70Mc":function(t,e,s){"use strict";s.d(e,"a",(function(){return a}));class a{static getAvatar(t,e="sm"){if(!t||!t.avatar_hash)return this.IMAGES.UNKNOWN_FACE;const[s,a]=t.avatar_hash.split(".");return`${this.STATIC_AVATAR_ENDPOINT}${t.uid}/${s}${e}.${a}`}}a.APP_NAME="PoliJob",a.APP_LOCALSTORAGE_TOKEN="PoliJob_Token",a.APP_VERSION="0.1.0",a.API_ENDPOINT="api/",a.STATIC_ENDPOINT=a.API_ENDPOINT+"static/",a.STATIC_AVATAR_ENDPOINT=a.STATIC_ENDPOINT+"images/avatar/",a.API_ENDPOINT_APP=a.API_ENDPOINT+"app/",a.API_ENDPOINT_USER=a.API_ENDPOINT+"users",a.API_ENDPOINT_OFFERS=a.API_ENDPOINT+"jobOffers",a.API_ENDPOINT_COMPANIES=a.API_ENDPOINT+"companies",a.API_ENDPOINT_USER_ME=a.API_ENDPOINT+"user-me",a.API_ENDPOINT_USER_CREATE=a.API_ENDPOINT_USER+"/create",a.API_ENDPOINT_CONFIRM_USER=a.API_ENDPOINT_USER+"/confirm-user",a.API_ENDPOINT_USER_REMEMBER_PASSWORD=a.API_ENDPOINT_USER+"/remember-password",a.API_ENDPOINT_USER_REQUEST_REMEMBER_PASSWORD=a.API_ENDPOINT_USER+"/request-remember-password",a.API_ENDPOINT_USER_REQUEST_USER_AVATAR=a.API_ENDPOINT_USER+"/request-avatar-user",a.API_ENDPOINT_USER_UPLOAD_AVATAR=a.API_ENDPOINT_USER+"/upload-avatar",a.API_ENDPOINT_USER_SENDMAIL=a.API_ENDPOINT_USER+"/sendmail",a.API_ENDPOINT_AUTH=a.API_ENDPOINT+"auth/",a.API_ENDPOINT_AUTH_LOCAL=a.API_ENDPOINT+"auth/local/",a.APP_QUILL_EDITOR_CONFIGURATION={toolbar:[["bold","italic","underline"],[{list:"ordered"},{list:"bullet"}],[{direction:"rtl"}],["clean"],["link"]]},a.APP_DEFAULT_MOMENT_LOCALE="es",a.GUESS_ROL={value:"guess",text:"settings.rol.GUESS"},a.STUDENT_ROL={value:"student",text:"settings.rol.STUDENT"},a.ADMINISTRATOR_ROL={value:"admin",text:"settings.rol.ADMINISTRATOR"},a.COMPANY_ROL={value:"company",text:"settings.rol.COMPANY"},a.ROLES=[a.GUESS_ROL,a.STUDENT_ROL,a.COMPANY_ROL,a.ADMINISTRATOR_ROL],a.USER_STATUS_PENDING={value:"pending",text:"settings.status.PENDING"},a.USER_STATUS_ACTIVE={value:"active",text:"settings.status.ACTIVE"},a.USER_STATUS_INACTIVE={value:"inactive",text:"settings.status.INACTIVE"},a.USER_STATUS=[a.USER_STATUS_PENDING,a.USER_STATUS_ACTIVE,a.USER_STATUS_INACTIVE],a.FORMAT_DATE="MM/DD/YYYY",a.IMAGES={UNKNOWN_IMAGE:"assets/images/image-not-found.png",UNKNOWN_FACE:"assets/images/face-unknown.png",UNKNOWN_TEAM:"assets/images/image-not-found.png"},a.NOTIFICATIONS={DEFAULT_TIME:2e3}},MwU1:function(t,e,s){"use strict";s.r(e),s.d(e,"SigninModule",(function(){return U}));var a=s("ofXK"),r=s("3Pt+"),i=s("tyNb"),n=s("itXk"),o=s("fXoL"),c=s("eyTg"),N=s("3r9f"),l=s("Wp6s"),_=s("kmnG"),u=s("qFsG"),E=s("bTqV");class I{constructor(t,e,s,a){this.fb=t,this.usersStoreFacade=e,this.companiesStoreFacade=s,this.router=a,this.isUsernameValid=!0,this.isPasswordValid=!0,this.createForm()}ngOnInit(){this.signinForm.get("username").statusChanges.subscribe(t=>this.onNameValidation(t)),this.signinForm.get("password").statusChanges.subscribe(t=>this.onPasswordValidation(t))}createForm(){this.signinForm=this.fb.group({username:[null,[r.p.required,r.p.email]],password:[null,[r.p.required]]})}loginUser(){const t=this.signinForm.get("username").value,e=this.signinForm.get("password").value;console.log("signin requested for user "+t+" with password "+e),Object(n.a)(this.usersStoreFacade.getUserByCredentials(t,e),this.companiesStoreFacade.getCompanyByCredentials(t,e)).subscribe(([e,s])=>{e&&e.hasOwnProperty("username")?this.router.navigate(["admin","student","dashboard",e.id]):s&&s.hasOwnProperty("username")?this.router.navigate(["admin","company","dashboard",s.id]):(this.router.navigate(["signup"]),console.log("Login for user "+t+" has failed, unknown username or password"))})}recallPassword(){this.router.navigate(["forgot-password"])}onNameValidation(t){this.isUsernameValid="INVALID"!==t}onPasswordValidation(t){this.isPasswordValid="INVALID"!==t}}I.\u0275fac=function(t){return new(t||I)(o.gc(r.c),o.gc(c.a),o.gc(N.a),o.gc(i.b))},I.\u0275cmp=o.ac({type:I,selectors:[["app-signin"]],decls:22,vars:2,consts:[[1,"tp-card"],["mat-card-image","","src","../../../assets/img/monsters-sa.png"],[3,"formGroup"],["matInput","","type","mail","placeholder","Email","name","username","formControlName","username"],["matInput","","type","password","placeholder","Password","name","password","formControlName","password"],["mat-button","","color","primary","type","submit",3,"disabled","click"],["mat-button","","color","primary","type","submit",3,"click"]],template:function(t,e){1&t&&(o.mc(0,"mat-card",0),o.mc(1,"mat-card-header"),o.hc(2,"img",1),o.lc(),o.mc(3,"mat-card-content"),o.mc(4,"mat-card-subtitle"),o.Rc(5,"Por favor, teclea tu usuario y password para conectarte"),o.lc(),o.mc(6,"form",2),o.mc(7,"div"),o.mc(8,"mat-form-field"),o.mc(9,"mat-label"),o.Rc(10,"Email"),o.lc(),o.hc(11,"input",3),o.lc(),o.lc(),o.mc(12,"div"),o.mc(13,"mat-form-field"),o.mc(14,"mat-label"),o.Rc(15,"Password"),o.lc(),o.hc(16,"input",4),o.lc(),o.lc(),o.lc(),o.lc(),o.lc(),o.mc(17,"mat-card-actions"),o.mc(18,"button",5),o.uc("click",(function(t){return e.loginUser()})),o.Rc(19,"Log in"),o.lc(),o.mc(20,"button",6),o.uc("click",(function(t){return e.recallPassword()})),o.Rc(21,"He olvidado mi password"),o.lc(),o.lc()),2&t&&(o.Ub(6),o.Dc("formGroup",e.signinForm),o.Ub(12),o.Dc("disabled",!e.signinForm.valid))},directives:[l.a,l.e,l.f,l.d,l.h,r.q,r.l,r.f,_.c,_.f,u.b,r.b,r.k,r.e,l.b,E.a],styles:[".mat-card-header{width:25vw}"],encapsulation:2,changeDetection:0});const m=[{path:"",component:I}];class A{}A.\u0275mod=o.ec({type:A}),A.\u0275inj=o.dc({factory:function(t){return new(t||A)},imports:[[i.c.forChild(m)],i.c]}),console.log("contructor signin");var P=s("PCNd"),d=s("QIXu"),T=s("oo2L"),O=s("nvtb"),S=s("ijts"),p=s("kt0X"),R=s("snw9"),g=s("zyTK"),D=s("zk9Z");class U{}U.\u0275mod=o.ec({type:U}),U.\u0275inj=o.dc({factory:function(t){return new(t||U)},providers:[c.a,O.a,N.a,S.a],imports:[[a.c,A,r.o,P.a,p.j.forFeature("users",D.e),p.j.forFeature("companies",g.e),R.b.forFeature([d.a,T.a])]]})}}]);
//# sourceMappingURL=10-es2015.974f9c4080bab3cecbe8.js.map