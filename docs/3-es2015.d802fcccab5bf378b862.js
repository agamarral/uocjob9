(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"70Mc":function(t,e,c){"use strict";c.d(e,"a",(function(){return a}));class a{static getAvatar(t,e="sm"){if(!t||!t.avatar_hash)return this.IMAGES.UNKNOWN_FACE;const[c,a]=t.avatar_hash.split(".");return`${this.STATIC_AVATAR_ENDPOINT}${t.uid}/${c}${e}.${a}`}}a.APP_NAME="PoliJob",a.APP_LOCALSTORAGE_TOKEN="PoliJob_Token",a.APP_VERSION="0.1.0",a.API_ENDPOINT="api/",a.STATIC_ENDPOINT=a.API_ENDPOINT+"static/",a.STATIC_AVATAR_ENDPOINT=a.STATIC_ENDPOINT+"images/avatar/",a.API_ENDPOINT_APP=a.API_ENDPOINT+"app/",a.API_ENDPOINT_USER=a.API_ENDPOINT+"users",a.API_ENDPOINT_OFFERS=a.API_ENDPOINT+"jobOffers",a.API_ENDPOINT_COMPANIES=a.API_ENDPOINT+"companies",a.API_ENDPOINT_USER_ME=a.API_ENDPOINT+"user-me",a.API_ENDPOINT_USER_CREATE=a.API_ENDPOINT_USER+"/create",a.API_ENDPOINT_CONFIRM_USER=a.API_ENDPOINT_USER+"/confirm-user",a.API_ENDPOINT_USER_REMEMBER_PASSWORD=a.API_ENDPOINT_USER+"/remember-password",a.API_ENDPOINT_USER_REQUEST_REMEMBER_PASSWORD=a.API_ENDPOINT_USER+"/request-remember-password",a.API_ENDPOINT_USER_REQUEST_USER_AVATAR=a.API_ENDPOINT_USER+"/request-avatar-user",a.API_ENDPOINT_USER_UPLOAD_AVATAR=a.API_ENDPOINT_USER+"/upload-avatar",a.API_ENDPOINT_USER_SENDMAIL=a.API_ENDPOINT_USER+"/sendmail",a.API_ENDPOINT_AUTH=a.API_ENDPOINT+"auth/",a.API_ENDPOINT_AUTH_LOCAL=a.API_ENDPOINT+"auth/local/",a.APP_QUILL_EDITOR_CONFIGURATION={toolbar:[["bold","italic","underline"],[{list:"ordered"},{list:"bullet"}],[{direction:"rtl"}],["clean"],["link"]]},a.APP_DEFAULT_MOMENT_LOCALE="es",a.GUESS_ROL={value:"guess",text:"settings.rol.GUESS"},a.STUDENT_ROL={value:"student",text:"settings.rol.STUDENT"},a.ADMINISTRATOR_ROL={value:"admin",text:"settings.rol.ADMINISTRATOR"},a.COMPANY_ROL={value:"company",text:"settings.rol.COMPANY"},a.ROLES=[a.GUESS_ROL,a.STUDENT_ROL,a.COMPANY_ROL,a.ADMINISTRATOR_ROL],a.USER_STATUS_PENDING={value:"pending",text:"settings.status.PENDING"},a.USER_STATUS_ACTIVE={value:"active",text:"settings.status.ACTIVE"},a.USER_STATUS_INACTIVE={value:"inactive",text:"settings.status.INACTIVE"},a.USER_STATUS=[a.USER_STATUS_PENDING,a.USER_STATUS_ACTIVE,a.USER_STATUS_INACTIVE],a.FORMAT_DATE="MM/DD/YYYY",a.IMAGES={UNKNOWN_IMAGE:"assets/images/image-not-found.png",UNKNOWN_FACE:"assets/images/face-unknown.png",UNKNOWN_TEAM:"assets/images/image-not-found.png"},a.NOTIFICATIONS={DEFAULT_TIME:2e3}},ffW3:function(t,e,c){"use strict";c.r(e),c.d(e,"OffersModule",(function(){return X}));var a=c("ofXK"),i=c("tyNb"),o=c("itXk"),r=c("lJxs"),s=c("eIep"),l=c("0IaG"),n=c("3Pt+"),m=c("fXoL"),f=c("Wp6s"),d=c("kmnG"),u=c("qFsG"),h=c("+0xr");function p(t,e){1&t&&(m.mc(0,"th",21),m.Rc(1," id "),m.lc())}function N(t,e){if(1&t&&(m.mc(0,"td",22),m.Rc(1),m.lc()),2&t){const t=e.$implicit;m.Ub(1),m.Tc(" ",t.uid," ")}}function _(t,e){1&t&&(m.mc(0,"th",21),m.Rc(1," Denominaci\xf3n del t\xedtulo "),m.lc())}function I(t,e){if(1&t&&(m.mc(0,"td",22),m.Rc(1),m.lc()),2&t){const t=e.$implicit;m.Ub(1),m.Tc(" ",t.name," ")}}function O(t,e){1&t&&m.hc(0,"tr",23)}function E(t,e){1&t&&m.hc(0,"tr",24)}function T(t,e){1&t&&(m.mc(0,"span"),m.Rc(1,"Inscribirme a la oferta"),m.lc())}function D(t,e){1&t&&(m.mc(0,"span"),m.Rc(1,"Borrarme de la oferta"),m.lc())}class R{constructor(t,e,c){this.formBuilder=t,this.dialogRef=e,this.titleDisplayedColumns=["titleName"],this.showRemoveButton=!1,this.offersDetailsDlgForm=this.formBuilder.group({company:[c.jobOffer.company.name,n.p.required],position:[c.jobOffer.job.name,n.p.required],jobDescription:[c.jobOffer.job.description,n.p.required],province:[c.jobOffer.province.name,n.p.required],town:[c.jobOffer.municipe.name,n.p.required],jobCategory:[c.jobOffer.category.name,n.p.required]}),this.titles=c.jobOffer.title,this.showRemoveButton=c.isFiltered,console.log("Is filtered "+this.showRemoveButton)}ngOnInit(){}close(){this.dialogRef.close()}apply(){this.dialogRef.close(this.offersDetailsDlgForm.value)}}R.\u0275fac=function(t){return new(t||R)(m.gc(n.c),m.gc(l.g),m.gc(l.a))},R.\u0275cmp=m.ac({type:R,selectors:[["app-offers-details-dialog"]],decls:63,vars:7,consts:[[3,"formGroup"],[1,"mat-typography"],["mat-card-title",""],[1,"full-width-field"],["matInput","","type","text","readonly","true","name","company","formControlName","company"],["matInput","","type","text","readonly","true","name","position","formControlName","position"],["matInput","","name","jobDescription","readonly","true","formControlName","jobDescription",3,"matTextareaAutosize"],[1,"half-width-field"],["matInput","","type","text","readonly","true","name","province","formControlName","province"],["matInput","","type","text","readonly","true","name","town","formControlName","town"],["matInput","","type","text","readonly","true","name","jobCategory","formControlName","jobCategory"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","titleName"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"mat-raised-button",3,"click"],[1,"mat-raised-button","mat-primary",3,"ngSwitch","click"],[4,"ngSwitchCase"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(m.mc(0,"mat-dialog-content",0),m.mc(1,"mat-card"),m.mc(2,"mat-card-header"),m.mc(3,"section",1),m.mc(4,"h3",2),m.Rc(5,"Oferta de trabajo"),m.lc(),m.lc(),m.lc(),m.mc(6,"mat-card-content"),m.mc(7,"fieldset"),m.mc(8,"legend"),m.Rc(9,"Detalle de la oferta"),m.lc(),m.mc(10,"div"),m.mc(11,"mat-form-field",3),m.mc(12,"mat-label"),m.Rc(13,"Empresa"),m.lc(),m.hc(14,"input",4),m.lc(),m.lc(),m.mc(15,"div"),m.mc(16,"mat-form-field",3),m.mc(17,"mat-label"),m.Rc(18,"Puesto"),m.lc(),m.hc(19,"input",5),m.lc(),m.lc(),m.mc(20,"div"),m.mc(21,"mat-form-field",3),m.mc(22,"mat-label"),m.Rc(23,"Descripci\xf3n del puesto"),m.lc(),m.hc(24,"textarea",6),m.lc(),m.lc(),m.lc(),m.mc(25,"fieldset"),m.mc(26,"legend"),m.Rc(27,"Municipio"),m.lc(),m.mc(28,"div"),m.mc(29,"mat-form-field",7),m.mc(30,"mat-label"),m.Rc(31,"Provincia"),m.lc(),m.hc(32,"input",8),m.lc(),m.mc(33,"mat-form-field",7),m.mc(34,"mat-label"),m.Rc(35,"Municipio"),m.lc(),m.hc(36,"input",9),m.lc(),m.lc(),m.lc(),m.mc(37,"fieldset"),m.mc(38,"legend"),m.Rc(39,"Destinado a profesional de:"),m.lc(),m.mc(40,"div"),m.mc(41,"mat-form-field",3),m.mc(42,"mat-label"),m.Rc(43,"Familia profesional"),m.lc(),m.hc(44,"input",10),m.lc(),m.lc(),m.mc(45,"section",1),m.mc(46,"h3"),m.Rc(47,"T\xedtulos compatibles con la oferta"),m.lc(),m.lc(),m.mc(48,"table",11),m.kc(49,12),m.Qc(50,p,2,0,"th",13),m.Qc(51,N,2,1,"td",14),m.jc(),m.kc(52,15),m.Qc(53,_,2,0,"th",13),m.Qc(54,I,2,1,"td",14),m.jc(),m.Qc(55,O,1,0,"tr",16),m.Qc(56,E,1,0,"tr",17),m.lc(),m.lc(),m.lc(),m.lc(),m.lc(),m.mc(57,"mat-dialog-actions"),m.mc(58,"button",18),m.uc("click",(function(t){return e.close()})),m.Rc(59,"Cerrar"),m.lc(),m.mc(60,"button",19),m.uc("click",(function(t){return e.apply()})),m.Qc(61,T,2,0,"span",20),m.Qc(62,D,2,0,"span",20),m.lc(),m.lc()),2&t&&(m.Dc("formGroup",e.offersDetailsDlgForm),m.Ub(48),m.Dc("dataSource",e.titles),m.Ub(7),m.Dc("matHeaderRowDef",e.titleDisplayedColumns),m.Ub(1),m.Dc("matRowDefColumns",e.titleDisplayedColumns),m.Ub(4),m.Dc("ngSwitch",e.showRemoveButton),m.Ub(1),m.Dc("ngSwitchCase",!1),m.Ub(1),m.Dc("ngSwitchCase",!0))},directives:[l.e,n.l,n.f,f.a,f.e,f.i,f.d,d.c,d.f,u.b,n.b,n.k,n.e,u.d,h.j,h.c,h.e,h.b,h.g,h.i,l.c,a.m,a.n,h.d,h.a,h.f,h.h],styles:[".half-width-field{width:30vw;margin-right:3vw}.full-width-field{width:70vw;margin-right:3vw}table.mat-table{width:60vw;margin-left:2vw}table.mat-table td.mat-cell{font-size:14px;text-align:center}table.mat-table th.mat-header-cell{text-align:center}"],encapsulation:2});var A=c("43yu"),P=c("eyTg");function b(t,e){1&t&&(m.mc(0,"th",11),m.Rc(1," id "),m.lc())}function g(t,e){if(1&t&&(m.mc(0,"td",12),m.Rc(1),m.lc()),2&t){const t=e.$implicit;m.Ub(1),m.Tc(" ",t.id," ")}}function S(t,e){1&t&&(m.mc(0,"th",11),m.Rc(1," Empresa "),m.lc())}function U(t,e){if(1&t&&(m.mc(0,"td",12),m.Rc(1),m.lc()),2&t){const t=e.$implicit;m.Ub(1),m.Tc(" ",t.company.name," ")}}function C(t,e){1&t&&(m.mc(0,"th",11),m.Rc(1," Familia Profesional "),m.lc())}function w(t,e){if(1&t&&(m.mc(0,"td",12),m.Rc(1),m.lc()),2&t){const t=e.$implicit;m.Ub(1),m.Tc(" ",t.category.name," ")}}function v(t,e){1&t&&(m.mc(0,"th",11),m.Rc(1," Fecha "),m.lc())}function y(t,e){if(1&t&&(m.mc(0,"td",12),m.Rc(1),m.lc()),2&t){const t=e.$implicit;m.Ub(1),m.Tc(" ",t.date," ")}}function j(t,e){1&t&&(m.mc(0,"th",11),m.Rc(1," Prov\xedncia "),m.lc())}function F(t,e){if(1&t&&(m.mc(0,"td",12),m.Rc(1),m.lc()),2&t){const t=e.$implicit;m.Ub(1),m.Tc(" ",t.province.name," ")}}function M(t,e){1&t&&m.hc(0,"tr",13)}function k(t,e){if(1&t){const t=m.nc();m.mc(0,"tr",14),m.uc("click",(function(c){m.Kc(t);const a=e.index;return m.yc().viewOfferDetail(a)})),m.lc()}}class Q{constructor(t,e,c,a){this.offersStoreFacade=t,this.usersStoreFacade=e,this.route=c,this.dialog=a,this.offers$=this.offersStoreFacade.offers$,this.user$=this.route.params.pipe(Object(r.a)(t=>t.id),Object(s.a)(t=>this.usersStoreFacade.getUserById(t))),this.isFiltered=!1,this.jobOffers=[],this.offersDisplayedColumns=["companyName","category","date","province"],this.theme="light-theme","Filtered Student Offers"===this.route.snapshot.data.title&&(this.isFiltered=!0),console.log(this.isFiltered)}ngOnInit(){Object(o.a)(this.user$,this.offers$).subscribe(([t,e])=>{t.hasOwnProperty("name")&&(this.user=t,this.isFiltered?this.jobOffers=e.filter(e=>t.offers.find(t=>t===e.id)):this.jobOffers=e.filter(e=>!t.offers.find(t=>t===e.id)))})}viewOfferDetail(t){const e=new l.d;e.disableClose=!0,e.autoFocus=!0,this.selectedOffer=this.jobOffers[t],e.data={jobOffer:this.selectedOffer,isFiltered:this.isFiltered},e.panelClass=this.theme,console.log(e.data),this.dialog.open(R,e).afterClosed().subscribe(t=>{let e={},c={};Object.assign(c,this.selectedOffer),e.id=this.user.id,t&&!this.isFiltered?(e.offers=[this.selectedOffer.id],this.user.offers.map(t=>e.offers.push(t)),c.users=[e.id],this.selectedOffer.users.map(t=>c.users.push(t))):t&&this.isFiltered&&(e.offers=this.user.offers.filter(t=>t!==this.selectedOffer.id),c.users=this.selectedOffer.users.filter(t=>t==e.id)),this.usersStoreFacade.updateUser(e),this.offersStoreFacade.updateOffer(c)})}}Q.\u0275fac=function(t){return new(t||Q)(m.gc(A.a),m.gc(P.a),m.gc(i.a),m.gc(l.b))},Q.\u0275cmp=m.ac({type:Q,selectors:[["app-offers"]],decls:21,vars:3,consts:[[1,"mat-typography"],["mat-table","",1,"mat-elevation-z8","light-theme",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","companyName"],["matColumnDef","category"],["matColumnDef","date"],["matColumnDef","province"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row","",3,"click"]],template:function(t,e){1&t&&(m.mc(0,"section",0),m.mc(1,"h3"),m.Rc(2,"Job offers"),m.lc(),m.lc(),m.mc(3,"table",1),m.kc(4,2),m.Qc(5,b,2,0,"th",3),m.Qc(6,g,2,1,"td",4),m.jc(),m.kc(7,5),m.Qc(8,S,2,0,"th",3),m.Qc(9,U,2,1,"td",4),m.jc(),m.kc(10,6),m.Qc(11,C,2,0,"th",3),m.Qc(12,w,2,1,"td",4),m.jc(),m.kc(13,7),m.Qc(14,v,2,0,"th",3),m.Qc(15,y,2,1,"td",4),m.jc(),m.kc(16,8),m.Qc(17,j,2,0,"th",3),m.Qc(18,F,2,1,"td",4),m.jc(),m.Qc(19,M,1,0,"tr",9),m.Qc(20,k,1,0,"tr",10),m.lc()),2&t&&(m.Ub(3),m.Dc("dataSource",e.jobOffers),m.Ub(16),m.Dc("matHeaderRowDef",e.offersDisplayedColumns),m.Ub(1),m.Dc("matRowDefColumns",e.offersDisplayedColumns))},directives:[h.j,h.c,h.e,h.b,h.g,h.i,h.d,h.a,h.f,h.h],styles:["table.mat-table[_ngcontent-%COMP%]{width:94vw;margin-left:auto;margin-right:auto}table.mat-table[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]{text-align:center;font-size:14px}table.mat-table[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]{text-align:center}"]});const x=[{path:"",component:Q}];class L{}L.\u0275mod=m.ec({type:L}),L.\u0275inj=m.dc({factory:function(t){return new(t||L)},imports:[[i.c.forChild(x)],i.c]});var $=c("PCNd"),G=c("kt0X"),B=c("snw9"),V=c("P+M7"),q=c("zk9Z"),H=c("8SXD"),K=c("QIXu"),W=c("AytR"),Y=c("B3rN"),z=c("A5HK"),J=c("nvtb");class X{}X.\u0275mod=m.ec({type:X}),X.\u0275inj=m.dc({factory:function(t){return new(t||X)},providers:[A.a,z.a,P.a,J.a],imports:[[a.c,L,n.o,n.g,$.a,G.j.forFeature("offers",V.c),G.j.forFeature("users",q.e),B.b.forFeature([H.a,K.a]),W.a.production?[]:Y.a.instrument()]]})}}]);
//# sourceMappingURL=3-es2015.d802fcccab5bf378b862.js.map