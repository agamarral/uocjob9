(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{rNMf:function(t,e,c){"use strict";c.r(e),c.d(e,"CompanyOffersModule",(function(){return st}));var a=c("ofXK"),i=c("PCNd"),n=c("3Pt+"),o=c("tyNb"),l=c("itXk"),m=c("lJxs"),r=c("eIep"),s=c("0IaG"),d=c("dQXc"),f=c("fXoL"),u=c("eyTg"),p=c("Wp6s"),h=c("kmnG"),g=c("qFsG"),b=c("d3UM"),y=c("+0xr"),w=c("FKr1");function D(t,e){if(1&t&&(f.mc(0,"mat-option",25),f.Rc(1),f.lc()),2&t){const t=e.$implicit;f.Dc("value",t),f.Ub(1),f.Sc(t)}}function C(t,e){if(1&t&&(f.mc(0,"mat-option",25),f.Rc(1),f.lc()),2&t){const t=e.$implicit;f.Dc("value",t),f.Ub(1),f.Sc(t)}}function v(t,e){1&t&&(f.mc(0,"th",26),f.Rc(1," Nombre del candidato "),f.lc())}function O(t,e){if(1&t&&(f.mc(0,"td",27),f.Rc(1),f.lc()),2&t){const t=e.$implicit;f.Ub(1),f.Tc(" ",t.name," ")}}function R(t,e){1&t&&(f.mc(0,"th",26),f.Rc(1," Apellido del candidato "),f.lc())}function j(t,e){if(1&t&&(f.mc(0,"td",27),f.Rc(1),f.lc()),2&t){const t=e.$implicit;f.Ub(1),f.Tc(" ",t.surname," ")}}function F(t,e){1&t&&f.hc(0,"mat-header-cell")}function k(t,e){if(1&t){const t=f.nc();f.mc(0,"mat-cell"),f.mc(1,"button",24),f.uc("click",(function(c){f.Kc(t);const a=e.$implicit;return f.yc().selectCandidate(a)})),f.Rc(2,"Seleccionar"),f.lc(),f.mc(3,"button",23),f.uc("click",(function(c){f.Kc(t);const a=e.$implicit;return f.yc().discardCandidate(a)})),f.Rc(4,"Descartar"),f.lc(),f.lc()}}function x(t,e){1&t&&f.hc(0,"tr",28)}function M(t,e){1&t&&f.hc(0,"tr",29)}class N{constructor(t,e,c,a){this.formBuilder=t,this.usersStoreFacade=e,this.dialogRef=c,this.provinceList=[],this.townList=[],this.candidates=[],this.candidatesDisplayedColumns=["candidateName","candidateSurname","actions"],this.currentOffer=a,this.currentOffer.users.map(t=>this.usersStoreFacade.getUserById(t).subscribe(t=>this.candidates.push(t))),d.forEach(t=>{this.provinceList.push(t.name)}),""!=a.province.name?(this.updateTownList(a.province.name),this.offersDetailsDlgForm=this.formBuilder.group({company:[a.company.name,n.p.required],position:[a.job.name,n.p.required],jobDescription:[a.job.description,n.p.required],province:[a.province.name,n.p.required],town:[a.municipe.name,n.p.required],jobCategory:[a.category.name,n.p.required],title:[a.title[0].name,n.p.required]})):this.offersDetailsDlgForm=this.formBuilder.group({company:[a.company.name,n.p.required],position:[a.job.name,n.p.required],jobDescription:[a.job.description,n.p.required],province:[a.province.name,n.p.required],town:[a.municipe.name,n.p.required],jobCategory:[a.category.name,n.p.required],title:["",n.p.required]}),this.titles=a.title}ngOnInit(){}close(){this.dialogRef.close()}apply(){let t=d.find(t=>t.name===this.offersDetailsDlgForm.get("province").value),e=t.towns.find(t=>t.name===this.offersDetailsDlgForm.get("town").value),c={};Object.assign(this.currentOffer),c.province={uid:t.uid,name:t.name},c.municipe=e,c.job={uid:0,name:this.offersDetailsDlgForm.get("position").value,description:this.offersDetailsDlgForm.get("jobDescription").value},c.category={uid:0,name:this.offersDetailsDlgForm.get("jobCategory").value},c.title=[],c.title.push({uid:0,name:this.offersDetailsDlgForm.get("title").value}),this.dialogRef.close(c)}updateTownList(t){let e=d.find(e=>e.name===t);this.townList=[],e.towns.forEach(t=>{this.townList.push(t.name)})}changeTown(){let t=this.offersDetailsDlgForm.get("province").value;this.updateTownList(t)}selectCandidate(t){console.log("candidate "+t.candidateName+" "+t.candidateSurname+" has been selected")}discardCandidate(t){console.log("candidate "+t.candidateName+" "+t.candidateSurname+" has been discarded")}}N.\u0275fac=function(t){return new(t||N)(f.gc(n.c),f.gc(u.a),f.gc(s.g),f.gc(s.a))},N.\u0275cmp=f.ac({type:N,selectors:[["app-company-offers-details-dialog"]],decls:70,vars:6,consts:[[3,"formGroup"],[1,"mat-typography"],["mat-card-title",""],[1,"full-width-field"],["matInput","","type","text","name","company","readOnly","true","formControlName","company"],["matInput","","type","text","name","position","formControlName","position"],["matInput","","name","jobDescription","formControlName","jobDescription",3,"matTextareaAutosize"],[1,"half-width-field"],["panelClass","formal-theme","formControlName","province",3,"selectionChange"],[3,"value",4,"ngFor","ngForOf"],["panelClass","formal-theme","formControlName","town"],["matInput","","type","text","name","jobCategory","formControlName","jobCategory"],["matInput","","type","text","name","title","formControlName","title"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","candidateName"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","candidateSurname"],["matColumnDef","actions"],[4,"matHeaderCellDef"],[4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"mat-raised-button",3,"click"],[1,"mat-raised-button","mat-primary",3,"click"],[3,"value"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(f.mc(0,"mat-dialog-content",0),f.mc(1,"mat-card"),f.mc(2,"mat-card-header"),f.mc(3,"section",1),f.mc(4,"h2",2),f.Rc(5,"Oferta de trabajo"),f.lc(),f.lc(),f.lc(),f.mc(6,"mat-card-content"),f.mc(7,"fieldset"),f.mc(8,"legend"),f.Rc(9,"Detalle de la oferta"),f.lc(),f.mc(10,"div"),f.mc(11,"mat-form-field",3),f.mc(12,"mat-label"),f.Rc(13,"Empresa"),f.lc(),f.hc(14,"input",4),f.lc(),f.lc(),f.mc(15,"div"),f.mc(16,"mat-form-field",3),f.mc(17,"mat-label"),f.Rc(18,"Puesto"),f.lc(),f.hc(19,"input",5),f.lc(),f.lc(),f.mc(20,"div"),f.mc(21,"mat-form-field",3),f.mc(22,"mat-label"),f.Rc(23,"Descripci\xf3n del puesto"),f.lc(),f.hc(24,"textarea",6),f.lc(),f.lc(),f.lc(),f.mc(25,"fieldset"),f.mc(26,"div"),f.mc(27,"mat-form-field",7),f.mc(28,"mat-label"),f.Rc(29,"Provincia"),f.lc(),f.mc(30,"mat-select",8),f.uc("selectionChange",(function(t){return e.changeTown()})),f.Qc(31,D,2,2,"mat-option",9),f.lc(),f.lc(),f.mc(32,"mat-form-field",7),f.mc(33,"mat-label"),f.Rc(34,"Municipio"),f.lc(),f.mc(35,"mat-select",10),f.Qc(36,C,2,2,"mat-option",9),f.lc(),f.lc(),f.lc(),f.lc(),f.mc(37,"fieldset"),f.mc(38,"legend"),f.Rc(39,"Destinado a profesional de:"),f.lc(),f.mc(40,"div"),f.mc(41,"mat-form-field",3),f.mc(42,"mat-label"),f.Rc(43,"Familia profesional"),f.lc(),f.hc(44,"input",11),f.lc(),f.lc(),f.mc(45,"div"),f.mc(46,"mat-form-field",3),f.mc(47,"mat-label"),f.Rc(48,"T\xedtulo"),f.lc(),f.hc(49,"input",12),f.lc(),f.lc(),f.lc(),f.mc(50,"section",1),f.mc(51,"h3"),f.Rc(52,"Candidatos"),f.lc(),f.lc(),f.mc(53,"table",13),f.kc(54,14),f.Qc(55,v,2,0,"th",15),f.Qc(56,O,2,1,"td",16),f.jc(),f.kc(57,17),f.Qc(58,R,2,0,"th",15),f.Qc(59,j,2,1,"td",16),f.jc(),f.kc(60,18),f.Qc(61,F,1,0,"mat-header-cell",19),f.Qc(62,k,5,0,"mat-cell",20),f.jc(),f.Qc(63,x,1,0,"tr",21),f.Qc(64,M,1,0,"tr",22),f.lc(),f.lc(),f.lc(),f.lc(),f.mc(65,"mat-dialog-actions"),f.mc(66,"button",23),f.uc("click",(function(t){return e.close()})),f.Rc(67,"Cerrar"),f.lc(),f.mc(68,"button",24),f.uc("click",(function(t){return e.apply()})),f.Rc(69,"Guardar"),f.lc(),f.lc()),2&t&&(f.Dc("formGroup",e.offersDetailsDlgForm),f.Ub(31),f.Dc("ngForOf",e.provinceList),f.Ub(5),f.Dc("ngForOf",e.townList),f.Ub(17),f.Dc("dataSource",e.candidates),f.Ub(10),f.Dc("matHeaderRowDef",e.candidatesDisplayedColumns),f.Ub(1),f.Dc("matRowDefColumns",e.candidatesDisplayedColumns))},directives:[s.e,n.l,n.f,p.a,p.e,p.i,p.d,h.c,h.f,g.b,n.b,n.k,n.e,g.d,b.a,a.j,y.j,y.c,y.e,y.b,y.g,y.i,s.c,w.o,y.d,y.a,y.f,y.h],styles:[".half-width-field{width:31vw;margin-right:3vw}.third-width-field{width:19.5vw;margin-right:3vw}.full-width-field{width:65vw;margin-right:3vw}.mat-card-title{margin-left:0}table.mat-table{width:60vw;margin-left:auto;margin-right:auto}table.mat-table td.mat-cell{font-size:14px;text-align:center}table.mat-table th.mat-header-cell{text-align:center}table.mat-table .mat-raised-button{margin-left:auto;margin-right:auto;margin-top:10px}table.mat-table .mat-raised-button .mat-icon{font-size:16px}table.mat-table .mat-column-actions,table.mat-table .mat-column-candidateName,table.mat-table .mat-column-candidateSurname{width:20vw}"],encapsulation:2,changeDetection:0});var Q=c("wd/R"),P=c.n(Q),S=c("43yu"),U=c("3r9f"),I=c("NFeN");function $(t,e){1&t&&(f.mc(0,"th",14),f.Rc(1," Empresa "),f.lc())}function _(t,e){if(1&t&&(f.mc(0,"td",15),f.Rc(1),f.lc()),2&t){const t=e.$implicit;f.Ub(1),f.Tc(" ",t.company.name," ")}}function q(t,e){1&t&&(f.mc(0,"th",14),f.Rc(1," Familia Profesional "),f.lc())}function T(t,e){if(1&t&&(f.mc(0,"td",15),f.Rc(1),f.lc()),2&t){const t=e.$implicit;f.Ub(1),f.Tc(" ",t.category.name," ")}}function L(t,e){1&t&&(f.mc(0,"th",14),f.Rc(1," Fecha "),f.lc())}function z(t,e){if(1&t&&(f.mc(0,"td",15),f.Rc(1),f.lc()),2&t){const t=e.$implicit;f.Ub(1),f.Tc(" ",t.date," ")}}function H(t,e){1&t&&(f.mc(0,"th",14),f.Rc(1," Prov\xedncia "),f.lc())}function K(t,e){if(1&t&&(f.mc(0,"td",15),f.Rc(1),f.lc()),2&t){const t=e.$implicit;f.Ub(1),f.Tc(" ",t.province.name," ")}}function X(t,e){if(1&t){const t=f.nc();f.mc(0,"mat-header-cell"),f.mc(1,"button",16),f.uc("click",(function(e){return f.Kc(t),f.yc().createNew()})),f.mc(2,"mat-icon",17),f.Rc(3,"add"),f.lc(),f.lc(),f.lc()}}function B(t,e){if(1&t){const t=f.nc();f.mc(0,"mat-cell"),f.mc(1,"button",16),f.uc("click",(function(c){f.Kc(t);const a=e.$implicit,i=e.index;return f.yc().edit(a,i)})),f.mc(2,"mat-icon",17),f.Rc(3,"create"),f.lc(),f.lc(),f.mc(4,"button",16),f.uc("click",(function(c){f.Kc(t);const a=e.index;return f.yc().cancelOrDelete(a)})),f.mc(5,"mat-icon",18),f.Rc(6,"clear"),f.lc(),f.lc(),f.lc()}}function G(t,e){1&t&&f.hc(0,"tr",19)}function A(t,e){1&t&&f.hc(0,"tr",20)}class E{constructor(t,e,c,a){this.offersStoreFacade=t,this.companiesStoreFacade=e,this.route=c,this.dialog=a,this.offers$=this.offersStoreFacade.offers$,this.company$=this.route.params.pipe(Object(m.a)(t=>t.id),Object(r.a)(t=>this.companiesStoreFacade.getCompanyById(t))),this.company={},this.offersDisplayedColumns=["companyName","category","date","province","actions"],this.theme="formal-theme",Object(l.a)(this.company$,this.offers$).subscribe(([t,e])=>{null!=t&&(this.company=t,e.length>0&&null!=this.company.offers&&(this.jobOffers=e.filter(t=>this.company.offers.includes(t.id)),this.nextOfferId=e.map(t=>t.id).reduce((t,e)=>e>t?e:t)+1))})}ngOnInit(){}createNew(){const t=new s.d;t.disableClose=!0,t.autoFocus=!0,t.panelClass=this.theme,this.selectedOffer={id:this.nextOfferId,company:{uid:this.company.id,name:this.company.company},job:{uid:0,name:"",description:""},province:{uid:0,name:""},municipe:{uid:0,name:""},category:{uid:0,name:""},date:P()().format("YYYY-MM-DD"),title:[],users:[]},t.data=this.selectedOffer,this.dialog.open(N,t).afterClosed().subscribe(t=>{if(t){let e={};Object.assign(e,t),this.offersStoreFacade.addOffer(e);let c={};c.id=this.company.id,c.offers=[],this.company.offers.map(t=>c.offers.push(t)),c.offers.push(this.selectedOffer.id),this.companiesStoreFacade.updateCompany(c),this.nextOfferId+=1}})}edit(t,e){const c=new s.d;c.disableClose=!0,c.autoFocus=!0,c.panelClass=this.theme,this.selectedOffer=this.jobOffers[e],c.data=t,console.log(c.data),this.dialog.open(N,c).afterClosed().subscribe(t=>{if(t){let e={};Object.assign(e,t),e.id=this.selectedOffer.id,this.offersStoreFacade.updateOffer(e)}})}cancelOrDelete(t){this.selectedOffer=this.jobOffers[t];let e={};e.id=this.company.id,e.offers=this.company.offers.filter(t=>t!=this.selectedOffer.id),this.companiesStoreFacade.updateCompany(e)}}E.\u0275fac=function(t){return new(t||E)(f.gc(S.a),f.gc(U.a),f.gc(o.a),f.gc(s.b))},E.\u0275cmp=f.ac({type:E,selectors:[["app-company-offers"]],decls:22,vars:3,consts:[["href","https://fonts.googleapis.com/icon?family=Material+Icons","rel","stylesheet"],[1,"mat-typography"],["mat-table","",1,"mat-elevation-z8","formal-theme",3,"dataSource"],["matColumnDef","companyName"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","category"],["matColumnDef","date"],["matColumnDef","province"],["matColumnDef","actions"],[4,"matHeaderCellDef"],[4,"matCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],[1,"mat-raised-button",3,"click"],["color","primary"],["color","warn"],["mat-header-row",""],["mat-row",""]],template:function(t,e){1&t&&(f.hc(0,"link",0),f.mc(1,"section",1),f.mc(2,"h3"),f.Rc(3,"Job offers"),f.lc(),f.lc(),f.mc(4,"table",2),f.kc(5,3),f.Qc(6,$,2,0,"th",4),f.Qc(7,_,2,1,"td",5),f.jc(),f.kc(8,6),f.Qc(9,q,2,0,"th",4),f.Qc(10,T,2,1,"td",5),f.jc(),f.kc(11,7),f.Qc(12,L,2,0,"th",4),f.Qc(13,z,2,1,"td",5),f.jc(),f.kc(14,8),f.Qc(15,H,2,0,"th",4),f.Qc(16,K,2,1,"td",5),f.jc(),f.kc(17,9),f.Qc(18,X,4,0,"mat-header-cell",10),f.Qc(19,B,7,0,"mat-cell",11),f.jc(),f.Qc(20,G,1,0,"tr",12),f.Qc(21,A,1,0,"tr",13),f.lc()),2&t&&(f.Ub(4),f.Dc("dataSource",e.jobOffers),f.Ub(16),f.Dc("matHeaderRowDef",e.offersDisplayedColumns),f.Ub(1),f.Dc("matRowDefColumns",e.offersDisplayedColumns))},directives:[y.j,y.c,y.e,y.b,y.g,y.i,y.d,y.a,I.a,y.f,y.h],styles:["h3[_ngcontent-%COMP%]{margin-top:10px;margin-left:2vw}.mat-column-companyName[_ngcontent-%COMP%]{width:20vw}.mat-column-category[_ngcontent-%COMP%]{width:30vw}.mat-column-date[_ngcontent-%COMP%], .mat-column-province[_ngcontent-%COMP%]{width:20vw}.mat-column-actions[_ngcontent-%COMP%]{width:10vw}table.mat-table[_ngcontent-%COMP%]{width:94vw;margin-left:auto;margin-right:auto}table.mat-table[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]{font-size:14px;text-align:center}table.mat-table[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]{text-align:center}table.mat-table[_ngcontent-%COMP%]   .mat-raised-button[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;margin-top:10px}table.mat-table[_ngcontent-%COMP%]   .mat-raised-button[_ngcontent-%COMP%]   .mat-icon[_ngcontent-%COMP%]{font-size:16px}"]});const J=[{path:"",component:E}];class Y{}Y.\u0275mod=f.ec({type:Y}),Y.\u0275inj=f.dc({factory:function(t){return new(t||Y)},imports:[[o.c.forChild(J)],o.c]});var W=c("kt0X"),Z=c("snw9"),V=c("P+M7"),tt=c("zk9Z"),et=c("zyTK"),ct=c("8SXD"),at=c("QIXu"),it=c("oo2L"),nt=c("AytR"),ot=c("B3rN"),lt=c("A5HK"),mt=c("nvtb"),rt=c("ijts");class st{}st.\u0275mod=f.ec({type:st}),st.\u0275inj=f.dc({factory:function(t){return new(t||st)},providers:[S.a,lt.a,u.a,mt.a,U.a,rt.a],imports:[[a.c,Y,n.o,n.g,i.a,W.j.forFeature("offers",V.c),W.j.forFeature("users",tt.e),W.j.forFeature("companies",et.e),Z.b.forFeature([ct.a,at.a,it.a]),nt.a.production?[]:ot.a.instrument()]]})}}]);
//# sourceMappingURL=11-es2015.6d837f1c790342b58fd4.js.map