function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(a):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}function _iterableToArrayLimit(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var a=[],r=!0,c=!1,n=void 0;try{for(var i,o=e[Symbol.iterator]();!(r=(i=o.next()).done)&&(a.push(i.value),!t||a.length!==t);r=!0);}catch(l){c=!0,n=l}finally{try{r||null==o.return||o.return()}finally{if(c)throw n}}return a}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,a){return t&&_defineProperties(e.prototype,t),a&&_defineProperties(e,a),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{"70Mc":function(e,t,a){"use strict";a.d(t,"a",(function(){return r}));var r=function(){function e(){_classCallCheck(this,e)}return _createClass(e,null,[{key:"getAvatar",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"sm";if(!e||!e.avatar_hash)return this.IMAGES.UNKNOWN_FACE;var a=e.avatar_hash.split("."),r=_slicedToArray(a,2),c=r[0],n=r[1];return"".concat(this.STATIC_AVATAR_ENDPOINT).concat(e.uid,"/").concat(c).concat(t,".").concat(n)}}]),e}();r.APP_NAME="PoliJob",r.APP_LOCALSTORAGE_TOKEN="PoliJob_Token",r.APP_VERSION="0.1.0",r.API_ENDPOINT="api/",r.STATIC_ENDPOINT=r.API_ENDPOINT+"static/",r.STATIC_AVATAR_ENDPOINT=r.STATIC_ENDPOINT+"images/avatar/",r.API_ENDPOINT_APP=r.API_ENDPOINT+"app/",r.API_ENDPOINT_USER=r.API_ENDPOINT+"users",r.API_ENDPOINT_OFFERS=r.API_ENDPOINT+"jobOffers",r.API_ENDPOINT_COMPANIES=r.API_ENDPOINT+"companies",r.API_ENDPOINT_USER_ME=r.API_ENDPOINT+"user-me",r.API_ENDPOINT_USER_CREATE=r.API_ENDPOINT_USER+"/create",r.API_ENDPOINT_CONFIRM_USER=r.API_ENDPOINT_USER+"/confirm-user",r.API_ENDPOINT_USER_REMEMBER_PASSWORD=r.API_ENDPOINT_USER+"/remember-password",r.API_ENDPOINT_USER_REQUEST_REMEMBER_PASSWORD=r.API_ENDPOINT_USER+"/request-remember-password",r.API_ENDPOINT_USER_REQUEST_USER_AVATAR=r.API_ENDPOINT_USER+"/request-avatar-user",r.API_ENDPOINT_USER_UPLOAD_AVATAR=r.API_ENDPOINT_USER+"/upload-avatar",r.API_ENDPOINT_USER_SENDMAIL=r.API_ENDPOINT_USER+"/sendmail",r.API_ENDPOINT_AUTH=r.API_ENDPOINT+"auth/",r.API_ENDPOINT_AUTH_LOCAL=r.API_ENDPOINT+"auth/local/",r.APP_QUILL_EDITOR_CONFIGURATION={toolbar:[["bold","italic","underline"],[{list:"ordered"},{list:"bullet"}],[{direction:"rtl"}],["clean"],["link"]]},r.APP_DEFAULT_MOMENT_LOCALE="es",r.GUESS_ROL={value:"guess",text:"settings.rol.GUESS"},r.STUDENT_ROL={value:"student",text:"settings.rol.STUDENT"},r.ADMINISTRATOR_ROL={value:"admin",text:"settings.rol.ADMINISTRATOR"},r.COMPANY_ROL={value:"company",text:"settings.rol.COMPANY"},r.ROLES=[r.GUESS_ROL,r.STUDENT_ROL,r.COMPANY_ROL,r.ADMINISTRATOR_ROL],r.USER_STATUS_PENDING={value:"pending",text:"settings.status.PENDING"},r.USER_STATUS_ACTIVE={value:"active",text:"settings.status.ACTIVE"},r.USER_STATUS_INACTIVE={value:"inactive",text:"settings.status.INACTIVE"},r.USER_STATUS=[r.USER_STATUS_PENDING,r.USER_STATUS_ACTIVE,r.USER_STATUS_INACTIVE],r.FORMAT_DATE="MM/DD/YYYY",r.IMAGES={UNKNOWN_IMAGE:"assets/images/image-not-found.png",UNKNOWN_FACE:"assets/images/face-unknown.png",UNKNOWN_TEAM:"assets/images/image-not-found.png"},r.NOTIFICATIONS={DEFAULT_TIME:2e3}},ffW3:function(e,t,a){"use strict";a.r(t),a.d(t,"OffersModule",(function(){return X}));var r=a("ofXK"),c=a("tyNb"),n=a("itXk"),i=a("lJxs"),o=a("eIep"),l=a("0IaG"),s=a("3Pt+"),f=a("fXoL"),m=a("Wp6s"),u=a("kmnG"),d=a("qFsG"),p=a("+0xr");function h(e,t){1&e&&(f.mc(0,"th",21),f.Rc(1," id "),f.lc())}function _(e,t){if(1&e&&(f.mc(0,"td",22),f.Rc(1),f.lc()),2&e){var a=t.$implicit;f.Ub(1),f.Tc(" ",a.uid," ")}}function I(e,t){1&e&&(f.mc(0,"th",21),f.Rc(1," Denominaci\xf3n del t\xedtulo "),f.lc())}function N(e,t){if(1&e&&(f.mc(0,"td",22),f.Rc(1),f.lc()),2&e){var a=t.$implicit;f.Ub(1),f.Tc(" ",a.name," ")}}function A(e,t){1&e&&f.hc(0,"tr",23)}function T(e,t){1&e&&f.hc(0,"tr",24)}function b(e,t){1&e&&(f.mc(0,"span"),f.Rc(1,"Inscribirme a la oferta"),f.lc())}function O(e,t){1&e&&(f.mc(0,"span"),f.Rc(1,"Borrarme de la oferta"),f.lc())}var E=function(){function e(t,a,r){_classCallCheck(this,e),this.formBuilder=t,this.dialogRef=a,this.titleDisplayedColumns=["titleName"],this.showRemoveButton=!1,this.offersDetailsDlgForm=this.formBuilder.group({company:[r.jobOffer.company.name,s.p.required],position:[r.jobOffer.job.name,s.p.required],jobDescription:[r.jobOffer.job.description,s.p.required],province:[r.jobOffer.province.name,s.p.required],town:[r.jobOffer.municipe.name,s.p.required],jobCategory:[r.jobOffer.category.name,s.p.required]}),this.titles=r.jobOffer.title,this.showRemoveButton=r.isFiltered,console.log("Is filtered "+this.showRemoveButton)}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"close",value:function(){this.dialogRef.close()}},{key:"apply",value:function(){this.dialogRef.close(this.offersDetailsDlgForm.value)}}]),e}();E.\u0275fac=function(e){return new(e||E)(f.gc(s.c),f.gc(l.g),f.gc(l.a))},E.\u0275cmp=f.ac({type:E,selectors:[["app-offers-details-dialog"]],decls:63,vars:7,consts:[[3,"formGroup"],[1,"mat-typography"],["mat-card-title",""],[1,"full-width-field"],["matInput","","type","text","readonly","true","name","company","formControlName","company"],["matInput","","type","text","readonly","true","name","position","formControlName","position"],["matInput","","name","jobDescription","readonly","true","formControlName","jobDescription",3,"matTextareaAutosize"],[1,"half-width-field"],["matInput","","type","text","readonly","true","name","province","formControlName","province"],["matInput","","type","text","readonly","true","name","town","formControlName","town"],["matInput","","type","text","readonly","true","name","jobCategory","formControlName","jobCategory"],["mat-table","",1,"mat-elevation-z8",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","titleName"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"mat-raised-button",3,"click"],[1,"mat-raised-button","mat-primary",3,"ngSwitch","click"],[4,"ngSwitchCase"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(e,t){1&e&&(f.mc(0,"mat-dialog-content",0),f.mc(1,"mat-card"),f.mc(2,"mat-card-header"),f.mc(3,"section",1),f.mc(4,"h3",2),f.Rc(5,"Oferta de trabajo"),f.lc(),f.lc(),f.lc(),f.mc(6,"mat-card-content"),f.mc(7,"fieldset"),f.mc(8,"legend"),f.Rc(9,"Detalle de la oferta"),f.lc(),f.mc(10,"div"),f.mc(11,"mat-form-field",3),f.mc(12,"mat-label"),f.Rc(13,"Empresa"),f.lc(),f.hc(14,"input",4),f.lc(),f.lc(),f.mc(15,"div"),f.mc(16,"mat-form-field",3),f.mc(17,"mat-label"),f.Rc(18,"Puesto"),f.lc(),f.hc(19,"input",5),f.lc(),f.lc(),f.mc(20,"div"),f.mc(21,"mat-form-field",3),f.mc(22,"mat-label"),f.Rc(23,"Descripci\xf3n del puesto"),f.lc(),f.hc(24,"textarea",6),f.lc(),f.lc(),f.lc(),f.mc(25,"fieldset"),f.mc(26,"legend"),f.Rc(27,"Municipio"),f.lc(),f.mc(28,"div"),f.mc(29,"mat-form-field",7),f.mc(30,"mat-label"),f.Rc(31,"Provincia"),f.lc(),f.hc(32,"input",8),f.lc(),f.mc(33,"mat-form-field",7),f.mc(34,"mat-label"),f.Rc(35,"Municipio"),f.lc(),f.hc(36,"input",9),f.lc(),f.lc(),f.lc(),f.mc(37,"fieldset"),f.mc(38,"legend"),f.Rc(39,"Destinado a profesional de:"),f.lc(),f.mc(40,"div"),f.mc(41,"mat-form-field",3),f.mc(42,"mat-label"),f.Rc(43,"Familia profesional"),f.lc(),f.hc(44,"input",10),f.lc(),f.lc(),f.mc(45,"section",1),f.mc(46,"h3"),f.Rc(47,"T\xedtulos compatibles con la oferta"),f.lc(),f.lc(),f.mc(48,"table",11),f.kc(49,12),f.Qc(50,h,2,0,"th",13),f.Qc(51,_,2,1,"td",14),f.jc(),f.kc(52,15),f.Qc(53,I,2,0,"th",13),f.Qc(54,N,2,1,"td",14),f.jc(),f.Qc(55,A,1,0,"tr",16),f.Qc(56,T,1,0,"tr",17),f.lc(),f.lc(),f.lc(),f.lc(),f.lc(),f.mc(57,"mat-dialog-actions"),f.mc(58,"button",18),f.uc("click",(function(e){return t.close()})),f.Rc(59,"Cerrar"),f.lc(),f.mc(60,"button",19),f.uc("click",(function(e){return t.apply()})),f.Qc(61,b,2,0,"span",20),f.Qc(62,O,2,0,"span",20),f.lc(),f.lc()),2&e&&(f.Dc("formGroup",t.offersDetailsDlgForm),f.Ub(48),f.Dc("dataSource",t.titles),f.Ub(7),f.Dc("matHeaderRowDef",t.titleDisplayedColumns),f.Ub(1),f.Dc("matRowDefColumns",t.titleDisplayedColumns),f.Ub(4),f.Dc("ngSwitch",t.showRemoveButton),f.Ub(1),f.Dc("ngSwitchCase",!1),f.Ub(1),f.Dc("ngSwitchCase",!0))},directives:[l.e,s.l,s.f,m.a,m.e,m.i,m.d,u.c,u.f,d.b,s.b,s.k,s.e,d.d,p.j,p.c,p.e,p.b,p.g,p.i,l.c,r.m,r.n,p.d,p.a,p.f,p.h],styles:[".half-width-field{width:30vw;margin-right:3vw}.full-width-field{width:70vw;margin-right:3vw}table.mat-table{width:60vw;margin-left:2vw}table.mat-table td.mat-cell{font-size:14px;text-align:center}table.mat-table th.mat-header-cell{text-align:center}"],encapsulation:2});var R=a("43yu"),D=a("eyTg");function P(e,t){1&e&&(f.mc(0,"th",11),f.Rc(1," id "),f.lc())}function y(e,t){if(1&e&&(f.mc(0,"td",12),f.Rc(1),f.lc()),2&e){var a=t.$implicit;f.Ub(1),f.Tc(" ",a.id," ")}}function g(e,t){1&e&&(f.mc(0,"th",11),f.Rc(1," Empresa "),f.lc())}function v(e,t){if(1&e&&(f.mc(0,"td",12),f.Rc(1),f.lc()),2&e){var a=t.$implicit;f.Ub(1),f.Tc(" ",a.company.name," ")}}function S(e,t){1&e&&(f.mc(0,"th",11),f.Rc(1," Familia Profesional "),f.lc())}function C(e,t){if(1&e&&(f.mc(0,"td",12),f.Rc(1),f.lc()),2&e){var a=t.$implicit;f.Ub(1),f.Tc(" ",a.category.name," ")}}function w(e,t){1&e&&(f.mc(0,"th",11),f.Rc(1," Fecha "),f.lc())}function U(e,t){if(1&e&&(f.mc(0,"td",12),f.Rc(1),f.lc()),2&e){var a=t.$implicit;f.Ub(1),f.Tc(" ",a.date," ")}}function j(e,t){1&e&&(f.mc(0,"th",11),f.Rc(1," Prov\xedncia "),f.lc())}function k(e,t){if(1&e&&(f.mc(0,"td",12),f.Rc(1),f.lc()),2&e){var a=t.$implicit;f.Ub(1),f.Tc(" ",a.province.name," ")}}function F(e,t){1&e&&f.hc(0,"tr",13)}function M(e,t){if(1&e){var a=f.nc();f.mc(0,"tr",14),f.uc("click",(function(e){f.Kc(a);var r=t.index;return f.yc().viewOfferDetail(r)})),f.lc()}}var L=function(){function e(t,a,r,c){var n=this;_classCallCheck(this,e),this.offersStoreFacade=t,this.usersStoreFacade=a,this.route=r,this.dialog=c,this.offers$=this.offersStoreFacade.offers$,this.user$=this.route.params.pipe(Object(i.a)((function(e){return e.id})),Object(o.a)((function(e){return n.usersStoreFacade.getUserById(e)}))),this.isFiltered=!1,this.jobOffers=[],this.offersDisplayedColumns=["companyName","category","date","province"],this.theme="light-theme","Filtered Student Offers"===this.route.snapshot.data.title&&(this.isFiltered=!0),console.log(this.isFiltered)}return _createClass(e,[{key:"ngOnInit",value:function(){var e=this;Object(n.a)(this.user$,this.offers$).subscribe((function(t){var a=_slicedToArray(t,2),r=a[0],c=a[1];r.hasOwnProperty("name")&&(e.user=r,e.isFiltered?e.jobOffers=c.filter((function(e){return r.offers.find((function(t){return t===e.id}))})):e.jobOffers=c.filter((function(e){return!r.offers.find((function(t){return t===e.id}))})))}))}},{key:"viewOfferDetail",value:function(e){var t=this,a=new l.d;a.disableClose=!0,a.autoFocus=!0,this.selectedOffer=this.jobOffers[e],a.data={jobOffer:this.selectedOffer,isFiltered:this.isFiltered},a.panelClass=this.theme,console.log(a.data),this.dialog.open(E,a).afterClosed().subscribe((function(e){var a={},r={};Object.assign(r,t.selectedOffer),a.id=t.user.id,e&&!t.isFiltered?(a.offers=[t.selectedOffer.id],t.user.offers.map((function(e){return a.offers.push(e)})),r.users=[a.id],t.selectedOffer.users.map((function(e){return r.users.push(e)}))):e&&t.isFiltered&&(a.offers=t.user.offers.filter((function(e){return e!==t.selectedOffer.id})),r.users=t.selectedOffer.users.filter((function(e){return e==a.id}))),t.usersStoreFacade.updateUser(a),t.offersStoreFacade.updateOffer(r)}))}}]),e}();L.\u0275fac=function(e){return new(e||L)(f.gc(R.a),f.gc(D.a),f.gc(c.a),f.gc(l.b))},L.\u0275cmp=f.ac({type:L,selectors:[["app-offers"]],decls:21,vars:3,consts:[[1,"mat-typography"],["mat-table","",1,"mat-elevation-z8","light-theme",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","companyName"],["matColumnDef","category"],["matColumnDef","date"],["matColumnDef","province"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"click",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row","",3,"click"]],template:function(e,t){1&e&&(f.mc(0,"section",0),f.mc(1,"h3"),f.Rc(2,"Job offers"),f.lc(),f.lc(),f.mc(3,"table",1),f.kc(4,2),f.Qc(5,P,2,0,"th",3),f.Qc(6,y,2,1,"td",4),f.jc(),f.kc(7,5),f.Qc(8,g,2,0,"th",3),f.Qc(9,v,2,1,"td",4),f.jc(),f.kc(10,6),f.Qc(11,S,2,0,"th",3),f.Qc(12,C,2,1,"td",4),f.jc(),f.kc(13,7),f.Qc(14,w,2,0,"th",3),f.Qc(15,U,2,1,"td",4),f.jc(),f.kc(16,8),f.Qc(17,j,2,0,"th",3),f.Qc(18,k,2,1,"td",4),f.jc(),f.Qc(19,F,1,0,"tr",9),f.Qc(20,M,1,0,"tr",10),f.lc()),2&e&&(f.Ub(3),f.Dc("dataSource",t.jobOffers),f.Ub(16),f.Dc("matHeaderRowDef",t.offersDisplayedColumns),f.Ub(1),f.Dc("matRowDefColumns",t.offersDisplayedColumns))},directives:[p.j,p.c,p.e,p.b,p.g,p.i,p.d,p.a,p.f,p.h],styles:["table.mat-table[_ngcontent-%COMP%]{width:94vw;margin-left:auto;margin-right:auto}table.mat-table[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]{text-align:center;font-size:14px}table.mat-table[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%]{text-align:center}"]});var x=[{path:"",component:L}],Q=function e(){_classCallCheck(this,e)};Q.\u0275mod=f.ec({type:Q}),Q.\u0275inj=f.dc({factory:function(e){return new(e||Q)},imports:[[c.c.forChild(x)],c.c]});var G=a("PCNd"),$=a("kt0X"),B=a("snw9"),H=a("P+M7"),V=a("zk9Z"),W=a("8SXD"),q=a("QIXu"),K=a("AytR"),Y=a("B3rN"),z=a("A5HK"),J=a("nvtb"),X=function e(){_classCallCheck(this,e)};X.\u0275mod=f.ec({type:X}),X.\u0275inj=f.dc({factory:function(e){return new(e||X)},providers:[R.a,z.a,D.a,J.a],imports:[[r.c,Q,s.o,s.g,G.a,$.j.forFeature("offers",H.c),$.j.forFeature("users",V.e),B.b.forFeature([W.a,q.a]),K.a.production?[]:Y.a.instrument()]]})}}]);
//# sourceMappingURL=3-es5.d802fcccab5bf378b862.js.map